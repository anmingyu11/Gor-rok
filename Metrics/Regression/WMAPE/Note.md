> https://zhuanlan.zhihu.com/p/91569114

MAE(Mean Absolute Error), MAPE(Mean Absolute Percentage Error)是用来做销量预测最常用的指标，在实际的线上线下销量预测中有着非常重要的评估意义。但是在实际的项目过程中发现，有些时候的指标并不能非常好的表示模型拟合的效果，因此对这部分进行了深入分析，发现有更优化的评价指标来度量销量预测问题。

MAE公式如下：
$$
MAE=\frac{1}{n} \sum_n|y^{'}-y|
$$
$y,y'$ 分别为真实值和预测值。

由于$y$可能存在数量级上的差别，导致相同的误差$|y'-y|$ **对最后的结果产生的影响存在数量级上的差别，这在某些实际应用场景下是存在问题的**。例如一件卖了10件的商品预测值在5-15之间和卖了5000件的商品预测在4995-5005的贡献的MAE是一样的，但显然两个预测的准确度差异巨大。

因此有MAPE指标辅助，MAPE公式如下：
$$
MAPE=\frac{1}{n} \sum_n\frac{|y^{'}-y|}{y}
$$
但是，这个指标存在两个问题：

- 假如遇到除数为0的情况，这个指标就没法计算；
- $y$ 数量级上的差别依然会导致问题。例如一件卖了2件的商品预测值为12，那么它的误差为500%，对最后的结果影响非常之大。

因此，Weighted MAPE也做了相应改进：
$$
WMAPE=\frac{\sum_n|y^{'}-y|}{\sum_n{y}}
$$
举个具体的例子，有10个物品，分别的APE，MAPE和wMAPE分别为：

![](/Users/helloword/Anmingyu/Gor-rok/Metrics/Regression/WMAPE/1.png)

假如数据集中有一点变化，商品5实际上没有销售，那么就会导致最后计算除数出现0，导致无法计算：

![](/Users/helloword/Anmingyu/Gor-rok/Metrics/Regression/WMAPE/2.png)

还是上面那个例子，假如商品5实际销量由1变为2，实际上是一个非常微小的抖动，但最后的MAPE抖动非常大，从30.5%到15.5%；但与此同时wMAPE却比较稳定，从5%到4.9%，避免了除数过小导致的指标不合理波动。

由以上例子看出，销量预测方面，还是尽量采用wMAPE更有说服力。