## Alias Method:时间复杂度O(1)的离散采样方法

[https://zhuanlan.zhihu.com/p/54867139](https://zhuanlan.zhihu.com/p/54867139)

最近在看graph embedding的一些东西，发现像node2vec在采样节点路径以及line中采样边的时候都用到了`Alias`方法，这里简单总结一下。

#### 问题定义

给定一个离散型随机变量的概率分布规律$P(X = i) = p_i,i \in 1,...,N$  ，希望设计一个方法能够从该概率分布中进行采样使得采样结果尽可能服从概率分布 $P$。

#### $O(N)$的方法

想象随机事件依其概率的大小分布在一个长度为 $1$ 的线段上。那么在线段中随机取一点，观察该点落在哪个事件对应的区间中，就取该区间对应的事件即可。 具体实现如下：

1. 生成 $0,1$ 均匀分布$r \sim Unif(0,1)$
2. 查找下标 $k$ 使得 $\sum_{j=1}^{k-1}p_j \le r <  \sum_{j=1}^{k}p_j$
3. 返回$k$

显然先构造一个存储累积事件概率的数组时间复杂度为 $O(N)$，每次进行线性查找的时间复杂度为 $O(N)$

